<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!--
  <link rel="stylesheet" href="pico/pico.min.css">
  -->
  <title>SuperMarquee Generator</title>
  <link rel="stylesheet" href="prism.css"  />
  <link rel="stylesheet" href="bootstrap.min.css" />
  <script type="application/javascript" src="bootstrap.bundle.min.js"></script>
  <style>
    .preview {
      background-color: #8089ff;
      color: white;
      position: fixed;
      top: 0;
      z-index: 100;
      font-size: 148px;
      width: 100%;
      filter: drop-shadow(0px 0px 4px #444);
    }

    .main {
      margin-top: 246px;
    }

    .form-label-head {
      font-family: monospace;
      font-weight: bolder;
    }

    #div-pingpongdelay {
      display: none;
    }

  </style>
</head>
<body>
<div id="preview"
     class="preview">
</div>
<div class="main" style="margin-bottom: 3rem;">
  <div class="container">
    <div class="card shadow">
      <div class="card-header">
        Configuration
      </div>
      <div class="card-body">
        <p>
          Use form elements below to customize the SuperMarquee instance and auto-generate the code. Please have a look at the documentation to find out all possibilities of SuperMarquee.
        </p>
        <form id="form-editor">
          <div class="row" style="margin-bottom: 2rem">
            <div class="col-md-4">
              <label class="form-label form-label-head">Presets</label>
              <div>
                <button data-type="example-setting"
                        class="btn btn-sm btn-primary"
                        data-value="default"
                        type="button">Default</button>
                <button data-type="example-setting"
                        class="btn btn-sm btn-primary"
                        data-value="rtl"
                        type="button">RTL</button>
                <button data-type="example-setting"
                        class="btn btn-sm btn-primary"
                        data-value="starwars"
                        type="button">Starwars</button>
                <button data-type="example-setting"
                        class="btn btn-sm btn-primary"
                        data-value="appearing"
                        type="button">Appearing</button>
              </div>
            </div>
            <div class="col-md-4">
              <label class="form-label form-label-head"
                     for="content">Content</label>
              <input type="text"
                     class="form-control"
                     id="content"
                     name="content"
                     placeholder="SuperMarquee By SuperPlug.in Is Super !!!" />
            </div>
            <div class="col-md-4">
                <label class="form-label form-label-head">Mode</label>
                <div class="row">
                  <div class="col">
                    <div class="form-check form-check-inline">
                      <input type="radio"
                             class="form-check-input"
                             id="mode-continuous"
                             name="mode"
                             value="continuous" checked>
                      <label class="form-check-label"
                             for="mode-continuous">Continuous</label>
                    </div>
                    <div class="form-check form-check-inline">
                      <input type="radio"
                             class="form-check-input"
                             id="mode-gapped"
                             name="mode"
                             value="gapped">
                      <label class="form-check-label"
                             for="mode-gapped">Gapped</label>
                    </div>
                    <div class="form-check form-check-inline">
                      <input type="radio"
                             class="form-check-input"
                             id="mode-pingpong"
                             name="mode"
                             value="pingpong">
                      <label class="form-check-label"
                             for="mode-pingpong">Ping-Pong</label>
                    </div>
                  </div>
                </div>
                <div class="row" id="div-spacer">
                  <div class="col-auto">
                    <label for="spacer" class="form-label">Spacer</label>
                  </div>
                  <div class="col">
                    <input type="text"
                           class="form-control form-control-sm"
                           id="spacer"
                           name="spacer"
                           placeholder="&amp;nbsp;" />
                  </div>
                </div>
                <div class="row" id="div-pingpongdelay">
                  <div class="col-auto">
                    <label for="pingPongDelay" class="form-label">PingPong Delay</label>
                  </div>
                  <div class="col">
                    <div class="input-group">
                      <input type="number"
                             class="form-control form-control-sm"
                             id="pingPongDelay"
                             value="2000"
                             name="pingPongDelay" />
                      <span class="input-group-text">ms</span>
                    </div>
                  </div>
                </div>
            </div>
          </div>
          <div class="row" style="margin-bottom: 2rem">
            <div class="col-md-4">
              <label class="form-label form-label-head">Type</label>
              <div class="row">
                <div class="col">
                  <div class="form-check form-check-inline">
                    <input type="radio"
                           class="form-check-input"
                           id="type-horizontal"
                           name="type"
                           value="horizontal" checked>
                    <label class="form-check-label" for="type-horizontal">Horizontal</label>
                  </div>
                  <div class="form-check form-check-inline">
                    <input type="radio"
                           class="form-check-input"
                           id="type-vertical"
                           name="type"
                           value="vertical">
                    <label class="form-check-label" for="type-vertical">Vertical</label>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-md-4">
              <fieldset>
                <label class="form-label form-label-head">Direction</label>
                <div class="row">
                  <div class="col-md-6">
                    <label for="type-ltr">
                      <input type="radio"
                             class="form-check-input"
                             id="type-ltr"
                             name="direction"
                             value="ltr" checked>
                      Left-To-Right
                    </label>
                  </div>
                  <div class="col-md-6">
                    <label for="type-rtl">
                      <input type="radio"
                             class="form-check-input"
                             id="type-rtl"
                             name="direction"
                             value="rtl">
                      Right-To-Left
                    </label>
                  </div>
                </div>
                <div class="row">
                  <div class="col-md-6">
                    <label for="type-btt">
                      <input type="radio"
                             id="type-btt"
                             class="form-check-input"
                             name="direction"
                             value="btt" disabled>
                      Bottom-To-Top
                    </label>
                  </div>
                  <div class="col-md-6">
                    <label for="type-ttb">
                      <input type="radio"
                             class="form-check-input"
                             id="type-ttb"
                             name="direction"
                             value="ttb" disabled>
                      Top-To-Bottom
                    </label>
                  </div>
                </div>
              </fieldset>
            </div>
            <div class="col-md-4">
              <fieldset>
                <input type="hidden"
                       id="speed"
                       name="speed"
                       value="0.1" />
                <label class="form-label form-label-head">Speed</label>
                <div class="btn-group"
                     role="group"
                     aria-label="Basic radio toggle button group">
                  <input type="radio"
                         class="btn-check"
                         name="btnradio"
                         id="btn-speed-superslow"
                         autocomplete="off">
                  <label class="btn btn-outline-primary"
                         data-type="speed-preset"
                         data-value="superslow"
                         for="btn-speed-superslow">Superslow</label>

                  <input type="radio"
                         class="btn-check"
                         name="btnradio"
                         id="btn-speed-slow"
                         autocomplete="off">
                  <label class="btn btn-outline-primary"
                         data-type="speed-preset"
                         data-value="slow"
                         for="btn-speed-slow">Slow</label>

                  <input type="radio"
                         class="btn-check"
                         name="btnradio"
                         id="btn-speed-medium"
                         autocomplete="off" checked>
                  <label class="btn btn-outline-primary"
                         data-type="speed-preset"
                         data-value="medium"
                         for="btn-speed-medium">Medium</label>

                  <input type="radio"
                         class="btn-check"
                         name="btnradio"
                         id="btn-speed-fast"
                         autocomplete="off">
                  <label class="btn btn-outline-primary"
                         data-type="speed-preset"
                         data-value="fast"
                         for="btn-speed-fast">Fast</label>

                  <input type="radio"
                         class="btn-check"
                         name="btnradio"
                         id="btn-speed-superfast"
                         autocomplete="off">
                  <label class="btn btn-outline-primary"
                         data-type="speed-preset"
                         data-value="superfast"
                         for="btn-speed-superfast">Superfast</label>

                </div>
                <label for="speed-custom-range" style="width: 100%;">
                  <input type="range"
                         min="0"
                         max="0.75"
                         value="0.125"
                         step="0.001"
                         id="speed-custom-range"
                         class="form-range"
                         name="speed-custom-range" />
                </label>
              </fieldset>
            </div>
          </div>
          <div class="row" style="margin-bottom: 2rem">
            <div class="col-md-4">
              <fieldset>
                <label class="form-label form-label-head">Position</label>
                <div class="form-check">
                  <input class="form-check-input"
                       type="radio"
                       id="position-custom"
                       name="position"
                       value="custom" checked></input>
                  <label class="form-check-label" for="position-custom">Custom</label>
                </div>
                <div class="form-check">
                  <input class="form-check-input"
                         type="radio"
                         id="position-fixedTop"
                         name="position"
                         value="fixedTop"></input>
                  <label class="form-check-label" for="position-fixedTop">Fixed Top</label>
                </div>
                <div class="form-check">
                  <input class="form-check-input"
                         type="radio"
                         id="position-fixedBottom"
                         name="position"
                         value="fixedBottom"></input>
                  <label class="form-check-label" for="position-fixedBottom">Fixed Bottom</label>
                </div>
              </fieldset>
            </div>
            <div class="col-md-4">
              <label class="form-label form-label-head">Perspective</label>
              <div class="row">
                <div class="col-auto">
                  Rotate X (%)
                </div>
                <div class="col">
                  <input type="range"
                         id="perspective.rotateX"
                         name="perspective.rotateX"
                         class="form-range"
                         min="0"
                         max="100"
                         value="0" />
                </div>
              </div>
              <div class="row">
                <div class="col-auto">
                  Rotate Y (%)
                </div>
                <div class="col">
                  <input type="range"
                         id="perspective.rotateY"
                         name="perspective.rotateY"
                         class="form-range"
                         min="0"
                         max="100"
                         value="0" />
                </div>
              </div>
              <div class="row">
                <div class="col-auto">
                  Rotate Z (%)
                </div>
                <div class="col">
                  <input type="range"
                         id="perspective.rotateZ"
                         name="perspective.rotateZ"
                         class="form-range"
                         min="0"
                         max="100"
                         value="0" />
                </div>
              </div>
              <div class="row">
                <div class="col-auto">
                  Z
                </div>
                <div class="col">
                  <input type="range"
                         id="perspective.z"
                         name="perspective.z"
                         class="form-range"
                         min="0"
                         max="1200"
                         value="0" />
                </div>
              </div>
              <div class="row">
                <div class="col-auto">
                  Origin X (%)
                </div>
                <div class="col">
                  <input type="range"
                         id="perspective.originX"
                         name="perspective.originX"
                         class="form-range"
                         min="0"
                         max="100"
                         value="50" />
                </div>
              </div>
              <div class="row">
                <div class="col-auto">
                  Origin Y (%)
                </div>
                <div class="col">
                  <input type="range"
                         id="perspective.originY"
                         name="perspective.originY"
                         class="form-range"
                         min="0"
                         max="100"
                         value="50" />
                </div>
              </div>
            </div>
            <div class="col-md-4">
              <label class="form-label form-label-head">Fading borders</label>

              <label class="form-label form-label-head">Interaction</label>
              <fieldset>
                <label for="pauseonhover">
                  <input type="checkbox"
                         id="pauseonhover"
                         name="pauseonhover"
                         role="switch">
                  Pause on hover
                </label>
              </fieldset>
            </div>
          </div>

          <h5>Code Generation</h5>
          <div class="row">
            <div class="col-md-6">
              <p style="margin-bottom: 12px;">Click on the button to generate the code.</p>
            </div>
            <div class="col-md-6" style="text-align: right">
              <button type="button"
                      class="btn btn-primary"
                      data-type="code-generate"
                      data-value="js"
                      data-target="modal-code"
                      onclick="">Vanilla JS</button>
              <button type="button"
                      data-type="code-generate"
                      class="btn btn-primary"
                      data-value="jq"
                      data-target="modal-code"
                      onclick="">jQuery</button>
              <button type="button"
                      class="btn btn-primary"
                      data-type="code-generate"
                      data-value="wc"
                      data-target="modal-code"
                      onclick="">Web Component</button>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

<footer class="footer mt-auto py-3 bg-body-tertiary">
  <div class="container">
    <span class="text-body-secondary" style="font-size: smaller">&copy; by superplug.in - a sub-division of <a href="https://aheadware.com">aheadware GmbH</a> • <a href="https://aheadware.com/imprint.php">Imprint</a></span>
  </div>
</footer>

<!-- Modal -->
<div class="modal modal-lg"
     id="code-modal"
     tabindex="-1">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Generated code</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <pre><code class="language-javascript" id="generated-code">
        </code></pre>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <!--
        <button type="button" class="btn btn-primary">Save changes</button>
        -->
      </div>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/sp-supermarquee@latest/dist/SuperMarquee.min.js"></script>
<script src="pico/modal.min.js"></script>
<script type="module">
  import { default as SuperMarquee } from "./../src/core/SuperMarquee.js";
  window.onload = function()
  {
    let sm = new SuperMarquee( document.getElementById( 'preview' ) ),
        currentOpts = {},
        self = this;

    self.updatePreview = function()
    {
      let fd = new FormData( document.getElementById( 'form-editor' ) ),
          p = { "z" : 0, "originX" : 50, "originY" : 50, "rotateX" : 0, "rotateY" : 0, "rotateZ" : 0 },
          opts = Object.fromEntries( fd );

      console.log( "UPDATE" );

      if ( "on" === opts.pauseonhover )
      {
        opts.pauseonhover = true;
      }
      else
      {
        opts.pauseonhover = false;
      }

      // Perspective
      for ( let pKey in p )
      {
        p[ pKey ] = document.getElementById( 'perspective.' + pKey ).value;
        delete opts[ 'perspective.' + pKey ];
      }
      delete opts[ 'speed-flag' ];
      opts.perspective = JSON.stringify( p );

      sm.destroy();
      sm = new SuperMarquee( document.getElementById( 'preview' ), opts );

      switch( opts.mode )
      {
        case "continuous":
          document.getElementById( 'div-spacer' ).style.display = "block";
          document.getElementById( 'div-pingpongdelay' ).style.display = "none";
        break;

        case "pingpong":
          document.getElementById( 'div-spacer' ).style.display = "none";
          document.getElementById( 'div-pingpongdelay' ).style.display = "block";
          sm.setPingPongDelay( +document.getElementById( 'pingPongDelay' ).value );
        break;

        default:
          document.getElementById( 'div-spacer' ).style.display = "none";
          document.getElementById( 'div-pingpongdelay' ).style.display = "none";
      }

      currentOpts = opts;
    };

    document.querySelectorAll( '[data-type="speed-preset"]' ).forEach( ( btn ) =>
    {
      btn.addEventListener( 'click', ( e ) => {
        document.getElementById( 'speed' ).value = btn.getAttribute( 'data-value' );
        self.updatePreview();
        document.getElementById( 'speed-custom-range' ).value = sm.getScrollSpeed();
      });
    });

    document.querySelectorAll( '[data-type="example-setting"]' ).forEach( ( btn ) =>
    {
      btn.addEventListener( 'click', ( e ) =>
      {
        document.getElementById( 'form-editor' ).reset();

        switch ( btn.getAttribute( 'data-value' ) )
        {
          case 'default':
            // Nothing to set
          break;

          case 'rtl':
            document.getElementById( 'content' ).value = 'שכל לחיבור קרימינולוגיה אנתרופולוגיה אם. בה כתב לחבר וכמקובל, ב שנתי רפואה ויקימדיה מתן, בה אחר ציור תרבות המדינה. ביוני המלחמה בלשנות מה ויש, ספרדית האנציקלופדיה כתב אם, בקר מדעי כימיה גם. שימושי האטמוספירה שמו על, גם אחר הטבע בחירות לעריכה. ראשי אנגלית תיקונים עזה של, על מפתח קסאם מיזמים זכר.';
            document.getElementById( 'type-rtl' ).checked = true;
          break;

          case 'starwars':
            document.getElementById( 'content' ).value = 'May the force be with you!';
            document.getElementById( 'type-vertical' ).checked = true;
            document.getElementById( 'perspective.z' ).value = 400;
            document.getElementById( 'perspective.rotateX' ).value = 60;
          break;

          case 'appearing':
            document.getElementById( 'perspective.z' ).value = 400;
            document.getElementById( 'perspective.rotateY' ).value = 40;
          break;
        }

        self.updatePreview();
      });
    });

    document.querySelectorAll( '[data-type="code-generate"]' ).forEach( ( btn ) =>
    {
      btn.addEventListener( 'click', ( e ) =>
      {
        e.preventDefault();

        let code = '';

        switch ( btn.getAttribute( 'data-value' ) )
        {
          case 'js':
            code = '// Vanilla javascript \n' +
                    'const sm = new SuperMarquee(\n' +
                    '  document.getElementById( \'your-element\' ),\n' +
                    '  ' + JSON.stringify( currentOpts, null, 4 ) + '\n' +
                    ');\n';
            break;

          case 'jq':
            code = '// jQuery \n' +
                    '$( \'#your-element\' ).supermarquee( \n' +
                    '  ' + JSON.stringify( currentOpts, null, 4 ) + '\n' +
                    ');\n';
            break;

          case 'wc':
            code = '// WebComponent (Angular, Svelte, React, Vue.js)\n' +
                    '&lt;super-marquee \n';
            for ( let oKey in currentOpts )
            {
              code += '  ' + oKey + '="' + currentOpts[ oKey ] + '"\n';
            }
            code += '>&lt;/super-marquee>;\n';
          break;
        }

        document.getElementById( 'generated-code' ).innerHTML = code;
        const codeModal = new bootstrap.Modal( document.getElementById( 'code-modal'));
        codeModal.show();
        Prism.highlightAll();
      });
    });

    document.querySelectorAll( 'input' ).forEach( ( i ) =>
    {
      switch ( i.getAttribute( 'name' ) )
      {
        case 'type':
          i.addEventListener( 'change', (e) => {
            if ( 'horizontal' === document.querySelector( 'input[name="type"]:checked' ).value )
            {
              document.getElementById( 'type-ltr' ).disabled = false;
              document.getElementById( 'type-rtl' ).disabled = false;
              document.getElementById( 'type-ttb' ).disabled = true;
              document.getElementById( 'type-btt' ).disabled = true;
              document.getElementById( 'type-ltr' ).checked = true;
              document.getElementById( 'spacer' ).placeholder = '&nbsp;'
            }
            else
            {
              document.getElementById( 'type-ltr' ).disabled = true;
              document.getElementById( 'type-rtl' ).disabled = true;
              document.getElementById( 'type-ttb' ).disabled = false;
              document.getElementById( 'type-btt' ).disabled = false;
              document.getElementById( 'type-btt' ).checked = true;
              document.getElementById( 'spacer' ).placeholder = '<br />';
            }
          });
        break;

        case 'mode':
          i.addEventListener( 'change', (e) => {
            if ( 'continuous' === document.querySelector( 'input[name="mode"]:checked' ).value )
            {
              document.getElementById( 'spacer' ).disabled = false;
            }
            else
            {
              document.getElementById( 'spacer' ).disabled = true;
            }
          });
        break;

        case 'speed-custom-range':
          i.addEventListener( 'change', ( e ) =>
          {
            document.getElementById( 'speed' ).value = i.value;
          });
        break;
      }

      i.addEventListener( 'change', ( e ) => { self.updatePreview(); } )

    });
  };
</script>
<script src="prism.js"></script>
</body>
</html>
